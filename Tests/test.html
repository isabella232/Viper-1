<html>
    <head>
        <title>Running: __TEST_TITLE__</title>
        <style>
            body {
                margin: 50px;
                background-color: #EEE;
                font-size: 20px;
            }

            #content {
                width: 800px;
                height: 600px;
                margin: auto;
                margin-top: 90px;
            }

            #menu {
                position: fixed;
                right: 100px;
                width: 100px;
                top: 50px;
            }

            #testTitle {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                background-color: #666;
                color: #EEE;
                font-size: 18px;
                text-align: center;
                font-weight: bold;
                padding: 5px 0;
            }

            #windowTarget {
                position: fixed;
                left: 0;
                top: 0;
                z-index: 999999;
            }

            * {
                font-style: normal;
                font-weight: normal;
                text-decoration: none;
            }

            em {
                color: green;
            }

            strong {
                color: red;
            }

            strong em,
            em strong {
                color: brown;
            }
        </style>
        <script type="text/javascript" src="../DfxJSLib/dfx.js"></script>
        <script type="text/javascript" src="../Viper-all.js"></script>
        <script type="text/javascript" src="./test.js"></script>
        <script type="text/javascript">
            var viper = null;
            ViperReadyCallback = function() {
                var contentElement = dfx.getId('content');

                viper = new Viper('test');
                viper.getPluginManager().setPlugins(['ViperCoreStylesPlugin', 'ViperKeyboardEditorPlugin', 'ViperInlineToolbarPlugin', 'ViperHistoryPlugin', 'ViperListPlugin', 'ViperFormatPlugin', 'ViperToolbarPlugin', 'ViperTableEditorPlugin', 'ViperCopyPastePlugin', 'ViperImagePlugin', 'ViperLinkPlugin', 'ViperAccessibilityPlugin', 'ViperSourceViewPlugin', 'ViperSearchReplacePlugin', 'ViperLangToolsPlugin', 'ViperCharMapPlugin', 'ViperTrackChangesPlugin']);
                viper.setEditableElement(contentElement);

                dfx.attr(dfxjQuery.find('.Viper-button[title]'), 'title', '');

                var jsRes = dfx.getId('jsRes');
                jsRes.value = '';
                var t = null;
                dfx.addEvent(jsRes, 'copy', function() {
                    t = setTimeout(function() {
                        viper.focus();
                    }, 100);
                });

                var jsExec   = dfx.getId('jsExec');
                jsExec.value = '';

                dfx.addEvent(jsExec, 'focus', function(e) {
                    viper.highlightSelection();
                    clearTimeout(t);
                    jsExec.value = '';
                });
            };
        </script>
        __TEST_JS_INCLUDE__
    </head>
    <body spellcheck="false">
        <img id="windowTarget" src="./Core/Images/window-target.png"/>
        <div id="content">__TEST_CONTENT__</div>
        <div id="menu">
            <textarea id="jsExec" accesskey="J"></textarea>
            <button onclick="execJS()">Exec</button>
            <textarea id="jsRes" accesskey="R"></textarea>
            <div id="testTitle"><em>Running:</em> __TEST_TITLE__</div>
        </div>
    </body>
</html>
