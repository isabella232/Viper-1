<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" media="screen" href="./test.css" />
        <!--[if IE]>
            <link rel="stylesheet" type="text/css" href="./test-ie.css" />
        <![endif]-->
        <script type="text/javascript" src="../Examples/jquery.js"></script>
        <script type="text/javascript" src="../Examples/jquery.ui.js"></script>
        <script type="text/javascript" src="../Lib/ViperUtil.js"></script>
        <script type="text/javascript" src="./test.js"></script>
        <script type="text/javascript" src="./PHPSikuli/PHPSikuliBrowser.js"></script>
        <script>
            function getCoords(keywords)
            {
                var content = '';
                for (var i = 0; i < keywords.length; i++) {
                    content += '<span>' + keywords[i] + '</span><br />';
                }

                ViperUtil.setHtml(ViperUtil.getid('spans'), content);

                var coords = {};
                var spans  = ViperUtil.getTag('span');
                for (var i = 0; i < spans.length; i++) {
                    coords[ViperUtil.getHtml(spans[i])] = ViperUtil.getBoundingRectangle(spans[i]);
                }

                return coords;

            }

            var spans = null;
            function changeContent(step, similarity)
            {
                ViperUtil.setHtml(ViperUtil.getid('msg'), 'Test stage ' + step + ' (Similarity = ' + parseInt(similarity * 100) + '%)');

                var content = '';

                if (!spans) {
                    spans = ViperUtil.getTag('span');
                    ViperUtil.remove(ViperUtil.getid('spans'));
                }

                if (!step || step === 1) {
                    var content = '';
                    for (var i = 0; i < spans.length; i++) {
                        content += ViperUtil.getHtml(spans[i]) + ' ';
                    }
                } else if (step > 1) {
                    var randText = 'UANBZXU@Nsday2783rpaadNMBZXJalknc:POAMN:+#)(=uzJBMNC&#HAJ!)(*&TUSFYHSJb9qyr9qwidiqwyrqwriyjzxcKAJKWRGHFIUGVBZNLfbclsebcrL:ZCMMXCUW';
                    for (var i = 0; i < spans.length; i++) {
                        var rand = Math.floor((Math.random() * 4) + 1);

                        if (step === 2) {
                            content += '<strong>';
                        } else if (step === 3) {
                            content += '<em>';
                        } else if (step === 4) {
                            content += '<strong><em>';
                        } else if (step === 5) {
                            switch (rand) {
                                case 1:
                                    content += '<strong>';
                                break;

                                case 2:
                                    content += '<em>';
                                break;

                                case 3:
                                    content += '<em><strong>';
                                break;

                                default:
                                break;
                            }
                        }

                        content += ViperUtil.getHtml(spans[i]);

                        if (step === 2) {
                            content += '</strong>';
                        } else if (step === 3) {
                            content += '</em>';
                        } else if (step === 4) {
                            content += '</em></strong>';
                        } else if (step === 5) {
                            switch (rand) {
                                case 1:
                                    content += '</strong>';
                                break;

                                case 2:
                                    content += '</em>';
                                break;

                                case 3:
                                    content += '</em></strong>';
                                break;

                                default:
                                break;
                            }
                        }//end if

                        var startIndex = Math.floor((Math.random() * (randText.length - 7)) + 1);
                        var endIndex   = 2 + Math.floor((Math.random() * 4) + 1);

                        var extraText = ' ' + randText.substr(startIndex, endIndex);
                        content += extraText + ' ';
                    }
                }

                ViperUtil.setHtml(ViperUtil.getid('testContent'), content);
            }
        </script>
    </head>
    <body spellcheck="false">
        <img id="windowTarget" src="./Core/Images/window-target.png" onclick="if (viper) viper.destroy();location.reload();" />
        <div id="spans"></div>
        <div id="testContent" style="width: 300px;"></div>
        <div id="msg" style="position:fixed;bottom: 10px;left:10px;font-size:12px;">Creating screenshots of keywords</div>
    </body>
</html>
